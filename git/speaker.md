# GIT/GIT FLOW

## 说在前面
* 团队内部GIT使用不规范，造成某些困难

## 目录
今天我们从三个方面来介绍一下GIT的相关知识。
* 第一部分是GIT的基础知识，我们将介绍**代码库**的概念、GIT的**工作流**和**分支**的概念
* 第二部分是GIT的一些使用指南。将从常用的GIT指令、分支合并、冲突处理、指令别名以及代码检查等方面给大家提供一些实际使用方面的信息
* 第三部分我将给大家介绍GIT的使用规范也就是GIT FLOW

## GIT BASE
先简单介绍下版本控制工具的发展: 版本控制工具(文件copy->本地版本控制->集中式svn等->分布式git)  

上面已经提及，GIT在中央服务器和每个客户端端点都存放了代码库镜像。中央服务器中的代码库叫远程仓库，也就是大家平时使用git时的那个origin；而客户端的代码仓库叫做本地仓库，是远程仓库的备份。但是本地仓库与远程仓库大部分时间是不完全同步的。(多人协作以及未与远程仓库同步造成差异)。可以通过git fetch将远程仓库同步到本地仓库  

接下来介绍GIT的工作流，GIT代码仓库中的文件会有三个状态：modified、staged、committed。文件的三个状态分别对应GIT的三个工作区域: working dir、stage area、repository。文件以三种状态流转于三个工作区域中。正常工作流程是：文件未修改->文件修改->文件add到stage->commit到仓库，此过程可逆。  

下面介绍分支的概念。分支被称为GIT的必杀技特性。分支其实在我们工作中已经有所应用了，大家从develop切出很多分支然后在分支上开发功能，用了很久但是分支到底是什么东西？我们细细道来：  
每次我们更改文件并形成一次提交时，GIT仓库会生成3类对象：针对每个更改的文件生成的文件快照**blob**对象；**tree**对象保存目录树信息以及blob索引；**commit**对象包含一些提交信息以及指向tree对象的索引。而且后一次提交的commit对象会保存一个指向前一次提交的commit对象的指针。多次提交后会形成commit对象的链。  

GIT的分支其实质上仅仅是个**指向commit的对象的可变指针**，并且会对commit做对应更新（当然手动可逆）;如何知道当前处于哪个分支？GIT中保存了一个特殊的**HEAD**指针指向当前分支的对象。


## GIT TIP
首先介绍下我们常用的一些git指令...  

再来谈一下GIT的分支合并，看前面一张图issue分支合并到master并生成一个新的commit对象；为什么要使用**--no-ff**？ff = fast-forword，中文名就叫快进式合并，就是将源分支的commit直接合并到目的分支，直观感受就是你看不出来有过分支合并的痕迹；使用非快进式的合并则能保留合并记录并生成新的合并commit。为了保证版本的清晰演进，要求使用非快进式合并。  

第三个要说的就是分支合并在某种情况下会出现冲突的情况。即两个人同时更改了相同文件的相同部分则会造成冲突。--->解决冲突；冲突并不是一个好的现象，出现冲突表示团队协作出现了问题或者分支的管理出现了问题，需要采用科学的方法尽力避免。  

再来说一下git命令的别名，也就是简写，能让你更快的打出命令。这里也推荐使用命令行而不要用图形化工具....高大上一点...  

最后再来聊聊代码检查

## GIT FLOW
GIT FLOW就是一套推荐的GIT工作规范。  

* master是主分支，维护稳定可发布的代码；
* develop是开发主分支，保存最新开发成果；
* feature从develop切出，进行独立的功能开发，功能开发完成后合并回develop分支；
* 当有功能需要发布时，从develop切出release分支，可以再release分支提供给测试进行测试，分支中可以修改版本号以及一些功能的修复，修复完成后合并回develop以及master；
* hotfix用于紧急bug修复，从master切出，修复完成后合并到master和develop中

需要注意的点:
* 每种分支都有其独特的意义，请做到见名达意
* 分支间，特别是feature分支间请保持功能的独立，分支的设计意义就是可以让大家在同一时间维度可以同时进行开发不同的功能而不相互干扰
* feature、hotfix等都是临时分支，使命达成后就可以删除，方便分支的管理
* 分支可以传到远程也可以不传，当你需要与他人协作一个功能时才将分支传到远程，否则请将分支保存在你本地仓库
