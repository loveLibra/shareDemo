-----------------------------------------

参观者忽略下述内容>_<|

-----------------------------------------
今天要分享的主题是React以及React的天生好搭档：flux。

首先来看React的相关内容

React起源于Fb的Instagram
React的设计思想独特，性能强大，代码逻辑性强，逐渐吸引到越来越多的人的关注并且很快推广开来。另外，React也很好的阐释了组件化的思想，可以有效避免duplicate，清晰的实现组件复用。React官方推荐使用JSX语法糖，JSX构建的View更贴近实际HTML的结构，易于使用，并且速度更快。目前GITHUB上的Star已经达到26,161

How To Use React？
我们从几个使用场景去简单说明一下React的使用：
    //
    浏览器端，我们可以引入React的库以及将JSX语法转化为JS的Transformer的库，这样在页面渲染的时候去把JSX编译成JS。显然这不是我们所想要的做法，就像我们不会把less文件直接加载到页面然后在页面记载的时候使用库去编译一样。更好的做法是，编译成js后引入。可以通过JSX的CLI在开发环境中动态编译，也可以通过其他一些自动化构建工具的扩展库实现编译和打包（比如gulp-jsx）。另外，可以需要引入类似于babel的库，因为jsx里面有很多比较好的es6甚至es7的特性。
    //
    Node服务端，require('react')，然后通过React公共API渲染成字符串
    //
    在Sea/Spm的使用场景下，类似node
    //
    另外，如果使用了browserify，Node可以直接进行页面渲染


好，下面我们来看几个简单的React的例子，通过例子我们逐步的深入了解React的使用方法
1.第一个例子，运行后，我们在页面显示了Hello,React。So easy~来看看React的代码：
React.createClass声明了一个React的Component，注意命名为大驼峰，以区分HTML标签的小写命名。createClass参数中必须至少包含一个render方法，返回组件的内容；然后通过React.render将组建渲染到页面'#content'元素内。注意组件标签都是自闭合的。

2.通过第一个例子，我们了解了两个React的API，通过这两个API就可以进行简单的静态页面开发了。但是如果需要根据服务端数据进行渲染呢？接下来看第二个例子，第二个例子我们将演示在组件中如何使用和传递数据，感受下React的单向数据流的设计思想。
在这个例子里面，根据传入的数据显示人的基本信息（名字，性别）并且做正向的计时。首先来看Timer组件的render方法，{}表达式中有两种不同的形式:this.props和this.state...看react.render方法中我传入了两个属性的键值对time和name,冥冥中自有定数....显然通过上述形式传入的参数可以通过this.props得到。再来看sex，我们并没有传入组件，但是还是会显示，为啥？看getDefaultsProps，提供了默认的props属性值。最后来看看time，我们要实现的效果是将传入的time作为初始值开始做正计时，如果我们通过一般方法去做，就是更新h2的内容显示。在React中，有用户交互或者变化的值我们保存在state中，然后通过this.setState去更新state值，组件会监听state值的变化，变化时会执行render重新渲染组件（更新到VirtualDom中，定期更新到DOM）。
再来看两个方法componentDidMount和componentWillUnmount，前者表示组件被挂载到DOM树中，后者表示卸载。此处我在挂载完成后设置了计时开始 以及 绑定了一个click时间到按钮中：获取按钮dom对象的方法是this.refs.xx.getDOMNode()，按钮点击效果是将此组件从content中卸载。组件中通过this可以得到组件的引用

3.接下来看第三个例子，第三个栗子主要是让大家了解下父子组件的嵌套...页面分为三部分 输入框、按钮和一个TODO的列表。todoList组件为TodoApp的子组件，并且TodoApp通过state传入数据到子组件中渲染Todo列表。父组件改变todos的值就可以去重新渲染列表



接下来简要介绍下组件的生命周期和相关API，其中两个API已经在上面的例子中有过使用了。组件的状态分为三个，挂载、更新和卸载。对应这三个状态，分别提供了5个方法表示进入状态之前和之后，Will表示进入状态之前，did表示之后。另外提供了两个特殊状态的处理函数：componentWillReceiveProps（已加载组件收到新的参数时调用），shouldComponentUpdate（组件判断是否重新渲染时调用，return false则不会触发更新DOM）

最后，react部分的内容仍然还有很多重要的内容没有详细的去讲，这里简单的提一下：1.首先是产生用户交互的表单组件，与正常的表单标签的，这边会有一些不同的规则。比如input，非React实现中如果给input value标签赋默认值，input会显示一个默认值但是能够修改，react中如果直接赋值字符串给value，会将input变为受限组件，用户的输入不会被响应；2.事件系统，React提供了与浏览器本地事件相同的属性和方法的虚拟事件对象，它是对底层事件的一个封装，没有兼容性问题...如果有需要访问底层浏览器事件对象可以使用nativeEvent访问；3.验证，由于子组件会接受父组件的参数进行渲染页面，因此有必要对传入的参数类型进行验证防止渲染时因为参数类型问题或者值的问题造成页面渲染出错。React提供了完备的验证。createClass({propTypes: {optionalArray: React.PropTypes.array...}})验证optionalArray为数组等等，详细内容自行探索；4.react也提供了一些插件方便正式使用中的各种情况，比如动画以及类名操作等

-----------------------------
来过一下我们现在开发模式中的spm的应用（例子）
React内容到此结束，休息&QA 

-----------------------------------------------

Flux是Fb用来构建客户端web应用的程序体系架构，依赖于前面提过的数据单向流动。相比于其他形式化的框架，flux更像是一种架构思想，类似于MVC的角色。

下面直接分析flux的核心工作流程：看图。流程很简答，4个节点，单向流动

图示后对照图详细解释demo